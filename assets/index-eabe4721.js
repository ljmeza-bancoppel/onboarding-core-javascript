(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(e){if(e.ep)return;e.ep=!0;const o=r(e);fetch(e.href,o)}})();const u="https://demo-api.incodesmile.com",h="67b60c0e7af70586d6f7f998",m=atob("NTJiMTQwYWQ0NjllODlhODg5NWQyNzg3OTYzMWU1MzcwOGQ2Y2Y3Zg=="),f={"Content-Type":"application/json","x-api-key":m,"api-version":"1.0"},p=async function(){const n=`${u}/omni/start`,t={configurationId:h,language:"es-ES"};let r;try{if(r=await fetch(n,{method:"POST",body:JSON.stringify(t),headers:f}),!r.ok)throw new Error("Request failed with code "+r.status)}catch(e){throw new Error("HTTP Post Error: "+e.message)}const{token:i}=await r.json();return{token:i}},g=async function(n){const t=`${u}/omni/finish-status`;let r={...f};r["X-Incode-Hardware-Id"]=n;let i;try{if(i=await fetch(t,{method:"GET",headers:r}),!i.ok)throw new Error("Request failed with code "+i.status)}catch(s){throw new Error("HTTP Post Error: "+s.message)}const{redirectionUrl:e,action:o}=await i.json();return{redirectionUrl:e,action:o}};let l,a,w=!0;const c=document.getElementById("camera-container");function d(n=null){const t=document.getElementById("finish-container");n!=null&&n.message?t.innerHTML=`<h1>Error: ${n.message}</h1>`:(t.innerHTML="<h1>There was an error</h1>",console.log(n))}function y(){l.sendFingerprint({token:a.token}),E()}function E(){l.renderCamera("document",c,{onSuccess:T,onError:d,token:a,nativeCamera:!1,disableFullScreen:!1,fullScreen:!0,showPreview:!1,numberOfTries:3,showTutorial:w})}function T(){g(a.token).then(n=>{console.log(n);const t=document.getElementById("finish-container");t.innerHTML="<h1>Onboarding Finished.</h1>"}).catch(n=>{d(n)})}async function O(){console.log("VITE_API_URL","https://demo-api.incodesmile.com"),console.log("VITE_API_KEY",{}.VITE_API_KEY);try{const n="https://demo-api.incodesmile.com",t={}.VITE_API_KEY;l=window.OnBoarding.create({apiURL:n,apiKey:t}),c.innerHTML="<h1>Creating session...</h1>",a=await p(),c.innerHTML="",console.log("incodeSession:",a),y()}catch(n){d(n)}}document.addEventListener("DOMContentLoaded",O);
