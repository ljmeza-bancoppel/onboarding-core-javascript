(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(e){if(e.ep)return;e.ep=!0;const n=r(e);fetch(e.href,n)}})();const u="https://demo-api.incodesmile.com",h="67b60c0e7af70586d6f7f998",m=atob("NTJiMTQwYWQ0NjllODlhODg5NWQyNzg3OTYzMWU1MzcwOGQ2Y2Y3Zg=="),f={"Content-Type":"application/json","x-api-key":m,"api-version":"1.0"},p=async function(){const t=`${u}/omni/start`,o={configurationId:h,language:"es-ES"};let r;try{if(r=await fetch(t,{method:"POST",body:JSON.stringify(o),headers:f}),!r.ok)throw new Error("Request failed with code "+r.status)}catch(e){throw new Error("HTTP Post Error: "+e.message)}const{token:i}=await r.json();return{token:i}},g=async function(t){const o=`${u}/omni/finish-status`;let r={...f};r["X-Incode-Hardware-Id"]=t;let i;try{if(i=await fetch(o,{method:"GET",headers:r}),!i.ok)throw new Error("Request failed with code "+i.status)}catch(s){throw new Error("HTTP Post Error: "+s.message)}const{redirectionUrl:e,action:n}=await i.json();return{redirectionUrl:e,action:n}};let d,a,w=!0;const c=document.getElementById("camera-container");function l(t=null){const o=document.getElementById("finish-container");t!=null&&t.message?o.innerHTML=`<h1>Error: ${t.message}</h1>`:(o.innerHTML="<h1>There was an error</h1>",console.log(t))}function y(){d.sendFingerprint({token:a.token}),T()}function T(){d.renderCamera("document",c,{onSuccess:E,onError:l,token:a,nativeCamera:!1,disableFullScreen:!1,fullScreen:!0,showPreview:!1,numberOfTries:3,showTutorial:w})}function E(){g(a.token).then(t=>{console.log(t);const o=document.getElementById("finish-container");o.innerHTML="<h1>Onboarding Finished.</h1>"}).catch(t=>{l(t)})}async function O(){try{const t="https://demo-api.incodesmile.com";d=window.OnBoarding.create({apiURL:t,apiKey:atob({}.VITE_API_KEY)}),c.innerHTML="<h1>Creating session...</h1>",a=await p(),c.innerHTML="",console.log("incodeSession:",a),y()}catch(t){l(t)}}document.addEventListener("DOMContentLoaded",O);
